# ðŸ”§ ÐŸÑ€Ð¾ÑˆÐ¸Ð²ÐºÐ° Ñ„Ð»ÐµÑˆ-Ð¿Ð°Ð¼ÑÑ‚Ð¸ Zynq Ñ‡ÐµÑ€ÐµÐ· `prog_flash.cmd`

## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°

ðŸ“… Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ Ð² ÐºÐ¾Ñ€Ð½Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð½Ð°Ñ…Ð¾Ð´ÑÑ‚ÑÑ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¸ Ð¿Ð°Ð¿ÐºÐ¸:

```
/Manual_Prog_Zynq
â”œâ”€â”€ BOOT.mcs           # ÐžÐ±Ñ€Ð°Ð· Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸, ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ñ‹Ð¹ Ñ‡ÐµÑ€ÐµÐ· bootgen
â”œâ”€â”€ fsbl.elf           # First Stage Boot Loader (FSBL)
â”œâ”€â”€ prog_flash.cmd          # Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð¿Ñ€Ð¾ÑˆÐ¸Ð²ÐºÐ¸

```

## ðŸ’  Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ð¼Ð¾Ðµ `prog_flash.cmd`

```cmd
echo Ð—Ð°Ð¿ÑƒÑÐº hw_server...

echo ÐŸÑ€Ð¾ÑˆÐ¸Ð²ÐºÐ° Ñ„Ð»ÐµÑˆ-Ð¿Ð°Ð¼ÑÑ‚Ð¸ Zynq...
cmd /C bin\program_flash.bat -f BOOT.mcs -offset 0 -flash_type qspi-x4-single -fsbl fsbl.elf -verify -url tcp:localhost:3121

pause
```

## ðŸ“Œ ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð²

| ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€                     | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ                                                              |
| ---------------------------- | --------------------------------------------------------------------- |
| `-f BOOT.mcs`                | ÐŸÑƒÑ‚ÑŒ Ðº `.mcs` Ñ„Ð°Ð¹Ð»Ñƒ â€” Ð¾Ð±Ñ€Ð°Ð·Ñƒ Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑˆÐ¸Ð²ÐºÐ¸                             |
| `-offset 0`                  | Ð¡Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð² Ð¿Ð°Ð¼ÑÑ‚Ð¸ (Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾ `0` Ð´Ð»Ñ Ð½Ð°Ñ‡Ð°Ð»Ð° Ð¿Ð°Ð¼ÑÑ‚Ð¸)               |
| `-flash_type qspi-x4-single` | Ð¢Ð¸Ð¿ Ñ„Ð»ÐµÑˆ-Ð¿Ð°Ð¼ÑÑ‚Ð¸ (QSPI Ð² Ñ€ÐµÐ¶Ð¸Ð¼Ðµ x4)                                    |
| `-fsbl fsbl.elf`             | ELF-Ñ„Ð°Ð¹Ð» Ð·Ð°Ð³Ñ€ÑƒÐ·Ñ‡Ð¸ÐºÐ° Ð¿ÐµÑ€Ð²Ð¾Ð³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ (FSBL)                             |
| `-verify`                    | Ð’ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ð²ÐµÑ€Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÑŽ Ð¿Ñ€Ð¾ÑˆÐ¸Ð²ÐºÐ¸ Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸                            |
| `-url tcp:localhost:3121`    | ÐÐ´Ñ€ÐµÑ JTAG-ÑÐµÑ€Ð²ÐµÑ€Ð° hw\_server, Ðº ÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ð¼Ñƒ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ÑÑ program\_flash |

## â–¶ï¸ Ð˜Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ Ð¿Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÑƒ

1. ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚Ðµ Zynq-Ð¿Ð»Ð°Ñ‚Ñƒ Ñ‡ÐµÑ€ÐµÐ· JTAG.
2. Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ, Ñ‡Ñ‚Ð¾ `program_flash.bat` Ð¸Ð¼ÐµÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ð² Ð¿Ð°Ð¿ÐºÑƒ ../bin.
3. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ CMD **Ð¾Ñ‚ Ð¸Ð¼ÐµÐ½Ð¸ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°**.
4. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² ÐºÐ¾Ñ€ÐµÐ½ÑŒ Ð¿Ð°Ð¿ÐºÐ¸:
   ```cmd
   cd Ð¿ÑƒÑ‚ÑŒ\Ðº\Manual_Prog_Zynq
   ```
5. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ:
   ```cmd
   prog_flash.cmd
   ```

```cmd
Ð›Ð¸Ð±Ð¾ Ð´Ð²Ð¾Ð¹Ð½Ñ‹Ð¼ Ð½Ð°Ð¶Ð°Ñ‚Ð¸ÐµÐ¼ Ð½Ð° prog_flash.cmd
```
---

> ðŸ’¡ **Ð¡Ð¾Ð²ÐµÑ‚:** Ð•ÑÐ»Ð¸ ÑƒÐ²Ð¸Ð´Ð¸Ñ‚Ðµ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð°Ñ‚Ð¾Ñ€Ð° Ðº ÐŸÐš
>```cmd
> WARNING: Failed to connect to hw_server at tcp:localhost:3121
> ```


